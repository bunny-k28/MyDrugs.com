<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KyZXEAg3QhqLMpG8r+8fhAXLRk2vvoC2f3B09zVXn8CA5QIVfZOJ3BCsw2P0p/We" crossorigin="anonymous">

    <link rel="shortcut icon" href="../../static/images/favicon.ico" type="image/x-icon">

    <title>MyDrugs•Password-Reset</title>
</head>

<link rel="stylesheet" href="../static/css/gen_style.css">

<body>
    <nav id="navbar-example2" class="navbar navbar-dark bg-dark px-3">
        <a class="navbar-brand" href="#">
			<div class="row g-3">
				<div class="col-auto">
					<img src="../../static/images/favicon.ico" width="50" height="50"
						class="d-inline-block align-text-top">
				</div>
				<div class="col-auto">
					<h3>
						<label>MyDrugs</label>
					</h3>
				</div>
			</div>
		</a>

        <div class="row g-3">

            <div class="col-auto">
                <a type="button" class="btn btn-primary" href="/login">
                    <h4>
                        Login
                    </h4>
                </a>
            </div>

            <div class="col-auto">
                <h3 style="color: white;">|</h3>
            </div>

            <div class="col-auto">
                <a type="button" class="btn btn-outline-primary" href="/signup">
                    <h4>
                        Sign-Up
                    </h4>
                </a>
            </div>

        </div>
    </nav>

    <br><br><br>

    {% if error.__len__() > 0 %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>{{ error }}</strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endif %}

    {% if validation==false %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            <strong>First verify your username <a href="/password-reset-redirector">here</a></strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endif %}

    {% if success.__len__() > 0 %}
        <div class="alert alert-success alert-dismissible fade show" role="alert">
            <strong>{{ success }}<a href="/login">Log-In</a></strong>
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>
    {% endif %}

    <br>

    <div class="container">

        <div class="card bg-dark">
            <div class="card-header">
                <h4>
                    Password Reset Form
                </h4>
            </div>

            <div class="card-body">

                <h2 class="card-title update-title">
                    Reset your Password here
                </h2>

                <p class="card-text">
                    Just enter the <b>2FA</b> code and your new <b>Password</b>.
                </p>

                <div class="row g-3">

                    <link rel="stylesheet" href="../static/css/password_reset.css">
                    <form class="form-group" method="post">
                        <div class="row g-3">
                    
                            <div class="col-3" id="twoFA-input">
                                <div class="input-group mb-3">
                                    <input type="tel" class="form-control" 
                                    name="2FA" placeholder="6-digit 2FA Code" required>
                                </div>
                            </div>

                            <div class="col-auto" id="twoFA-msg">
                                <h4>
                                    <b>ℹ️Check your registered Email inbox</b>
                                </h4>
                            </div>

                        </div>

                        <div class="row g-3">

                            <div class="col-2">
                                <input  type="password" class="form-control" 
                                name="new_password" placeholder="Password (Min 8 chars)" required>
                            </div>
                            
                            <div class="col-2">
                                <input  type="password" class="form-control" 
                                name="confirm_password" placeholder="Confirm Password" required>
                            </div>

                            <div class="col-auto">
                                <button type="submit" class="btn btn-warning">Reset Password</button>
                            </div>
                    
                            <div class="col-auto">
                                <h1>
                                    <pre>{{ status }}</pre>
                                </h1>
                            </div>
                    
                        </div>
                    </form>

                </div>

            </div>
        </div>

    </div>



    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.0/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-U1DAWAznBHeqEIlVSCgzq+c9gqGAJn5c/t99JyeKa9xxaYpSvHU5awsuZVVFIhvj"
        crossorigin="anonymous"></script>

</body>

</html>